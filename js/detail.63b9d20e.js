(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["detail"],{1574:function(o,t,e){},1829:function(o,t,e){"use strict";e("1574")},"45fc":function(o,t,e){"use strict";var a=e("23e7"),i=e("b727").some,s=e("a640"),n=e("ae40"),r=s("some"),l=n("some");a({target:"Array",proto:!0,forced:!r||!l},{some:function(o){return i(this,o,arguments.length>1?arguments[1]:void 0)}})},c84b:function(o,t,e){"use strict";e.r(t);var a=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"detail"},[o.bool?e("div",[e("HomeHeader",{attrs:{myBook:o.bookDetail}},[o._v(o._s(o.goback))]),o.bookDetailData._id?e("van-card",{attrs:{thumb:decodeURIComponent(o.bookDetailData.cover.slice(7))},scopedSlots:o._u([{key:"title",fn:function(){return[e("h3",[o._v(o._s(o.bookDetailData.title))])]},proxy:!0},{key:"desc",fn:function(){return[e("span",{staticStyle:{color:"#b83320"}},[o._v(o._s(o.bookDetailData.author))]),o._v(" | "),e("span",[o._v(o._s(o.bookDetailData.minorCate))]),o._v(" | "),e("span",[o._v(o._s(parseInt(o.bookDetailData.totalFollower/1e4)+"万字"))]),e("p",[o._v(o._s(o.bookDetailData.isSerial?"完结":"连载"))])]},proxy:!0}],null,!1,3153471542)}):o._e(),e("div",{staticClass:"detail-botton"},[e("van-button",{class:{subtract:o.isAddBook},attrs:{plain:!o.isAddBook,color:o.isAddBook?"#999":"#b83320"},on:{click:o.addBook}},[o._v(o._s(o.isAddBook?"撤出书架":"加入书架"))]),e("van-button",{attrs:{type:"danger",color:"#b83320"},on:{click:o.playBook}},[o._v("开始阅读")])],1),o.bookDetailData.allowFree?e("div",{staticStyle:{"text-align":"center"}},[o._v(" 开通vip,免费阅读此书 ")]):o._e()],1):e("van-loading",{staticClass:"loading",attrs:{color:"#0094ff"}})],1)},i=[],s=(e("4de4"),e("45fc"),e("a6ab")),n={data:function(){return{bookDetail:"书籍详情",goback:"⮜ 返回",bookDetailData:{},bool:!1,isAddBook:!1,books:[]}},computed:{},created:function(){var o=this;this.bool=!1,this.axios.get("http://novel.kele8.cn/book-info/"+this.$route.query.id).then((function(t){o.bool=!0,o.bookDetailData=t.data})),this.books=JSON.parse(window.localStorage.getItem("books"))||[],this.isAddBook=this.books.some((function(t){return t._id==o.$route.query.id}))},components:{HomeHeader:s["a"]},methods:{playBook:function(){var o=this;this.bool=!1,this.axios.get("http://novel.kele8.cn/book-sources?view=summary&book="+this.$route.query.id).then((function(t){console.log(t),o.axios.get("http://novel.kele8.cn/book-chapters/"+t.data[0]._id).then((function(t){console.log(o.$route),o.$router.push({path:"/book/"+o.$route.query.id,params:{id:o.$route.query.id}}),o.$store.commit("updateChapter",t.data),o.$store.commit("updateBookDetailData",o.bookDetailData)}))}))},addBook:function(){var o=this;if(this.isAddBook)return this.isAddBook=!1,console.log(this.books.filter((function(t){return t._id!==o.bookDetailData._id}))),this.books=this.books.filter((function(t){return t._id!==o.bookDetailData._id})),console.dir(JSON.stringify(this.books)),void window.localStorage.setItem("books",JSON.stringify(this.books));this.books.unshift(this.bookDetailData),window.localStorage.setItem("books",JSON.stringify(this.books)),this.isAddBook=!0}}},r=n,l=(e("1829"),e("2877")),d=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=detail.63b9d20e.js.map